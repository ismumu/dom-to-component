<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
    
<div class='wrapper'></div>

<script>


// çŠ¶æ€æ”¹å˜ -> æ„å»ºæ–°çš„ DOM å…ƒç´ æ›´æ–°é¡µé¢
// è¿™é‡Œè¦æå‡ºçš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼šä¸€æ—¦çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå°±é‡æ–°è°ƒç”¨ render æ–¹æ³•ï¼Œæ„å»ºä¸€ä¸ªæ–°çš„ DOM å…ƒç´ ã€‚
// è¿™æ ·åšçš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¥½å¤„å°±æ˜¯ä½ å¯ä»¥åœ¨ render æ–¹æ³•é‡Œé¢ä½¿ç”¨æœ€æ–°çš„ this.state æ¥æ„é€ ä¸åŒ HTML ç»“æ„çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”é€šè¿‡è¿™ä¸ªå­—ç¬¦ä¸²æ„é€ ä¸åŒçš„ DOM å…ƒç´ ã€‚é¡µé¢å°±æ›´æ–°äº†



    class LikeButton {

        constructor () {
            this.state = {
                isLiked: false,
            }
        }

        setState (state) {

            const oldEl = this.el;

            this.state = state;
            this.el = this.render();

            if( this.onStateChange ) this.onStateChange(oldEl, this.el);

        }

        changeLikeText () {
            this.setState({
                isLiked: !this.state.isLiked
            })
        }

        createDomFromString (domString) {
            const div = document.createElement('div');
            div.innerHTML = domString;
            return div;
        }

        render () {

            this.el = this.createDomFromString(`
                <button class='like-btn'>
                    <span class='like-text'>${this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'}</span>
                    <span>ğŸ‘</span>
                </button>
            `);
            
            
            this.el.addEventListener('click', this.changeLikeText.bind(this));

            return this.el;
        }
    }

    // ç„¶åå¯ä»¥ç”¨è¿™ä¸ªç±»æ¥æ„å»ºä¸åŒçš„ç‚¹èµåŠŸèƒ½çš„å®ä¾‹ï¼Œç„¶åæŠŠå®ƒä»¬æ’åˆ°é¡µé¢ä¸­ã€‚
    const wrapper = document.querySelector('.wrapper')
    const likeButton = new LikeButton();
    wrapper.appendChild(likeButton.render());

    likeButton.onStateChange = ( oldEl, newEl ) => {
        wrapper.insertBefore(newEl, oldEl);
        wrapper.removeChild(oldEl);
    }





</script>



</body>
</html>